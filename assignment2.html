<!DOCTYPE html>
<html>
<head>

	<script src="https://d3js.org/d3.v4.min.js" type="text/javascript">
	</script>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
	</script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js">
	</script>
	<style>
	          
	      div.tooltip {
	      	position: absolute;
	      	text-align: center;
	      	width: 110px;
	      	height: 30px;
	      	padding: 2px;
	      	font: 10px "Arial";
	      	background: #eff3ff;
	      	border: 1px solid black;
	      	border-radius: 8px;
	      	pointer-events: none;
	      }
	      .axis {
	      	font: 14px "Arial";
	      }
	      p {
	      	font: 18px "Arial";
	      }
	      .whiteText {
	      	font: 18px "Arial";
	      	color: white;
	      }
	      #subhead {
	      	margin-top: 5px;
	      	margin-left: 5px;
	      	font: 22px "Arial";
	      }
	      h1 {
	      	font: 40px "Arial";
	      }
	      .viz1 {
	      	width: 1200px;
	      	height: 625px;
	      }
	      .viz2 {
	      	width: 1200px;
	      	height: 625px;
	      }
	      .controls {
	      	margin-left: 50px;
	      	margin-right: 50px;
	      }
	</style>
	<title></title>
</head>
<body>
	<div class="container-fluid">
		<div class="controls">
            <!--            Title-->
			<div class="row">
				<div class="col-lg-12">
					<h1>World Economic Forum Global Competitiveness Index</h1>
				</div>
			</div>
            <!--            Year counter-->
			<div class="container-fluid">
				<div class="row">
					<div class="col-lg-1">
						<h3>Year</h3>
					</div>
					<div class="col-lg-11">
						<h3 id="showyear"></h3>
					</div>
				</div>
			</div>
            <!--            Select year and country control, chart 1-->
			<div class="row">
				<div class="col-lg-6" style="padding: 5px; background-color: white; border: 1px solid black; display: flex;align-items: center;">
					<p id="subhead">Select year</p>
				</div>
				<div class="col-lg-6" style="padding: 5px; background-color: white; border: 1px solid black;display: flex;align-items: center;">
					<p id="subhead">Select one country to track</p>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-6" style="height: 50px;padding: 5px; background-color: white;border: 1px solid black; display: flex;align-items: center;">
					<div class="col-lg-6">
						<select id="select_year" onchange="year_change()">
							<option value="2017">
								2017
							</option>
							<option value="2016">
								2016
							</option>
							<option value="2015">
								2015
							</option>
							<option value="2014">
								2014
							</option>
							<option value="2013">
								2013
							</option>
							<option value="2012">
								2012
							</option>
							<option value="2011">
								2011
							</option>
							<option value="2010">
								2010
							</option>
							<option value="2009">
								2009
							</option>
							<option value="2008">
								2008
							</option>
							<option value="2007">
								2007
							</option>
						</select>
					</div>
					<div class="col-lg-6">
						<button class="btn btn-primary" onclick="animation()" type="button">Play animation</button>
					</div>
				</div>
				<div class="col-lg-6" style="height: 50px;padding: 5px; background-color: #ffff00; border: 1px solid black;display: flex;align-items: center;">
					<div class="col-lg-6">
						<select id="select_country" onchange="select_country()">
							<option value="Albania">
								Albania
							</option>
							<option value="Algeria">
								Algeria
							</option>
							<option value="Argentina">
								Argentina
							</option>
							<option value="Armenia">
								Armenia
							</option>
							<option value="Australia">
								Australia
							</option>
							<option value="Austria">
								Austria
							</option>
							<option value="Azerbaijan">
								Azerbaijan
							</option>
							<option value="Bahrain">
								Bahrain
							</option>
							<option value="Bangladesh">
								Bangladesh
							</option>
							<option value="Barbados">
								Barbados
							</option>
							<option value="Belgium">
								Belgium
							</option>
							<option value="Benin">
								Benin
							</option>
							<option value="Bolivia">
								Bolivia
							</option>
							<option value="Bosnia and Herzegovina">
								Bosnia and Herzegovina
							</option>
							<option value="Botswana">
								Botswana
							</option>
							<option value="Brazil">
								Brazil
							</option>
							<option value="Bulgaria">
								Bulgaria
							</option>
							<option value="Burkina Faso">
								Burkina Faso
							</option>
							<option value="Burundi">
								Burundi
							</option>
							<option value="Cambodia">
								Cambodia
							</option>
							<option value="Cameroon">
								Cameroon
							</option>
							<option value="Canada">
								Canada
							</option>
							<option value="Chad">
								Chad
							</option>
							<option value="Chile">
								Chile
							</option>
							<option value="China">
								China
							</option>
							<option value="Colombia">
								Colombia
							</option>
							<option value="Costa Rica">
								Costa Rica
							</option>
							<option value="Croatia">
								Croatia
							</option>
							<option value="Cyprus">
								Cyprus
							</option>
							<option value="Czech Republic">
								Czech Republic
							</option>
							<option value="Denmark">
								Denmark
							</option>
							<option value="Dominican Republic">
								Dominican Republic
							</option>
							<option value="Ecuador">
								Ecuador
							</option>
							<option value="Egypt">
								Egypt
							</option>
							<option value="El Salvador">
								El Salvador
							</option>
							<option value="Estonia">
								Estonia
							</option>
							<option value="Ethiopia">
								Ethiopia
							</option>
							<option value="Finland">
								Finland
							</option>
							<option value="France">
								France
							</option>
							<option value="Gambia, The">
								Gambia, The
							</option>
							<option value="Georgia">
								Georgia
							</option>
							<option value="Germany">
								Germany
							</option>
							<option value="Greece">
								Greece
							</option>
							<option value="Guatemala">
								Guatemala
							</option>
							<option value="Guyana">
								Guyana
							</option>
							<option value="Honduras">
								Honduras
							</option>
							<option value="Hungary">
								Hungary
							</option>
							<option value="Iceland">
								Iceland
							</option>
							<option value="India">
								India
							</option>
							<option value="Indonesia">
								Indonesia
							</option>
							<option value="Ireland">
								Ireland
							</option>
							<option value="Israel">
								Israel
							</option>
							<option value="Italy">
								Italy
							</option>
							<option value="Jamaica">
								Jamaica
							</option>
							<option value="Japan">
								Japan
							</option>
							<option value="Jordan">
								Jordan
							</option>
							<option value="Kazakhstan">
								Kazakhstan
							</option>
							<option value="Kenya">
								Kenya
							</option>
							<option value="Korea, Rep.">
								Korea, Rep.
							</option>
							<option value="Kuwait">
								Kuwait
							</option>
							<option value="Latvia">
								Latvia
							</option>
							<option value="Lesotho">
								Lesotho
							</option>
							<option value="Libya">
								Libya
							</option>
							<option value="Lithuania">
								Lithuania
							</option>
							<option value="Luxembourg">
								Luxembourg
							</option>
							<option value="Madagascar">
								Madagascar
							</option>
							<option value="Malaysia">
								Malaysia
							</option>
							<option value="Mali">
								Mali
							</option>
							<option value="Malta">
								Malta
							</option>
							<option value="Mauritania">
								Mauritania
							</option>
							<option value="Mauritius">
								Mauritius
							</option>
							<option value="Mexico">
								Mexico
							</option>
							<option value="Mongolia">
								Mongolia
							</option>
							<option value="Montenegro">
								Montenegro
							</option>
							<option value="Morocco">
								Morocco
							</option>
							<option value="Mozambique">
								Mozambique
							</option>
							<option value="Namibia">
								Namibia
							</option>
							<option value="Nepal">
								Nepal
							</option>
							<option value="Netherlands">
								Netherlands
							</option>
							<option value="New Zealand">
								New Zealand
							</option>
							<option value="Nicaragua">
								Nicaragua
							</option>
							<option value="Nigeria">
								Nigeria
							</option>
							<option value="Norway">
								Norway
							</option>
							<option value="Oman">
								Oman
							</option>
							<option value="Pakistan">
								Pakistan
							</option>
							<option value="Panama">
								Panama
							</option>
							<option value="Paraguay">
								Paraguay
							</option>
							<option value="Peru">
								Peru
							</option>
							<option value="Philippines">
								Philippines
							</option>
							<option value="Poland">
								Poland
							</option>
							<option value="Portugal">
								Portugal
							</option>
							<option value="Qatar">
								Qatar
							</option>
							<option value="Romania">
								Romania
							</option>
							<option value="Russian Federation">
								Russian Federation
							</option>
							<option value="Saudi Arabia">
								Saudi Arabia
							</option>
							<option value="Senegal">
								Senegal
							</option>
							<option value="Serbia">
								Serbia
							</option>
							<option value="Singapore">
								Singapore
							</option>
							<option value="Slovenia">
								Slovenia
							</option>
							<option value="South Africa">
								South Africa
							</option>
							<option value="Spain">
								Spain
							</option>
							<option value="Sri Lanka">
								Sri Lanka
							</option>
							<option value="Sweden">
								Sweden
							</option>
							<option value="Switzerland">
								Switzerland
							</option>
							<option value="Syria">
								Syria
							</option>
							<option value="Tajikistan">
								Tajikistan
							</option>
							<option value="Tanzania">
								Tanzania
							</option>
							<option value="Thailand">
								Thailand
							</option>
							<option value="Trinidad and Tobago">
								Trinidad and Tobago
							</option>
							<option value="Tunisia">
								Tunisia
							</option>
							<option value="Turkey">
								Turkey
							</option>
							<option value="Uganda">
								Uganda
							</option>
							<option value="Ukraine">
								Ukraine
							</option>
							<option value="United Arab Emirates">
								United Arab Emirates
							</option>
							<option value="United Kingdom">
								United Kingdom
							</option>
							<option value="United States">
								United States
							</option>
							<option value="Uruguay">
								Uruguay
							</option>
							<option value="Venezuela">
								Venezuela
							</option>
							<option value="Zambia">
								Zambia
							</option>
							<option value="Zimbabwe">
								Zimbabwe
							</option>
						</select>
					</div>
					<div class="col-lg-6">
						<button class="btn btn-primary" onclick="animatecountries()" type="button">Play animation</button>
					</div>
				</div>
                <!--            Colour legends-->
				<div class="col-lg-3" style="padding: 5px; background-color: #377eb8; border: 1px solid black;display: flex;align-items: center;">
					<p class="whiteText">High income countries</p>
				</div>
				<div class="col-lg-3" style="padding: 5px; background-color: #4daf4a; border: 1px solid black;display: flex;align-items: center;">
					<p class="whiteText">Upper middle income countries</p>
				</div>
				<div class="col-lg-3" style="padding: 5px; background-color: #984ea3; border: 1px solid black; display: flex;align-items: center;">
					<p class="whiteText">Lower middle income countries</p>
				</div>
				<div class="col-lg-3" style="padding: 5px; background-color: #ff7f00; border: 1px solid black; display: flex;align-items: center;">
					<p class="whiteText">Low income countries</p>
				</div>
			</div>
		</div>
        <!--        Bubble chart-->
		<div class="row">
			<div class="col-lg-12">
				<div class="viz1"></div>
			</div>
		</div>
		<div class="controls">
			<div class="row">
<!--                Title 2-->
				<div class="col-lg-12" style="padding-bottom: 15px;">
					<h2>Compare two countries performance in various pillars of the index</h2>
				</div>
			</div>
            <!--            Select year and country control, chart 2-->
			<div class="row">
				<div class="col-lg-4" style="padding: 5px; background-color: white; border: 1px solid black;display: flex;align-items: center;">
					<p id="subhead">Select year</p>
				</div>
				<div class="col-lg-4" style="padding: 5px; background-color: white; border: 1px solid black; display: flex;align-items: center;">
					<p id="subhead">Select first country</p>
				</div>
				<div class="col-lg-4" style="padding: 5px; background-color: white; border: 1px solid black; display: flex;align-items: center;">
					<p id="subhead">Select second country</p>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-4" style="padding: 10px; background-color: white; border: 1px solid black;">
					<select id="select_year2" onchange="year_change2()">
						<option value="2017">
							2017
						</option>
						<option value="2016">
							2016
						</option>
						<option value="2015">
							2015
						</option>
						<option value="2014">
							2014
						</option>
						<option value="2013">
							2013
						</option>
						<option value="2012">
							2012
						</option>
						<option value="2011">
							2011
						</option>
						<option value="2010">
							2010
						</option>
						<option value="2009">
							2009
						</option>
						<option value="2008">
							2008
						</option>
						<option value="2007">
							2007
						</option>
					</select>
				</div>
				<div class="col-lg-4" style="padding: 10px; background-color: #8da0cb; border: 1px solid black;">
					<select id="select_country2" onchange="select_country2()">
						<option value="Albania">
							Albania
						</option>
						<option value="Algeria">
							Algeria
						</option>
						<option value="Argentina">
							Argentina
						</option>
						<option value="Armenia">
							Armenia
						</option>
						<option value="Australia">
							Australia
						</option>
						<option value="Austria">
							Austria
						</option>
						<option value="Azerbaijan">
							Azerbaijan
						</option>
						<option value="Bahrain">
							Bahrain
						</option>
						<option value="Bangladesh">
							Bangladesh
						</option>
						<option value="Barbados">
							Barbados
						</option>
						<option value="Belgium">
							Belgium
						</option>
						<option value="Benin">
							Benin
						</option>
						<option value="Bolivia">
							Bolivia
						</option>
						<option value="Bosnia and Herzegovina">
							Bosnia and Herzegovina
						</option>
						<option value="Botswana">
							Botswana
						</option>
						<option value="Brazil">
							Brazil
						</option>
						<option value="Bulgaria">
							Bulgaria
						</option>
						<option value="Burkina Faso">
							Burkina Faso
						</option>
						<option value="Burundi">
							Burundi
						</option>
						<option value="Cambodia">
							Cambodia
						</option>
						<option value="Cameroon">
							Cameroon
						</option>
						<option value="Canada">
							Canada
						</option>
						<option value="Chad">
							Chad
						</option>
						<option value="Chile">
							Chile
						</option>
						<option value="China">
							China
						</option>
						<option value="Colombia">
							Colombia
						</option>
						<option value="Costa Rica">
							Costa Rica
						</option>
						<option value="Croatia">
							Croatia
						</option>
						<option value="Cyprus">
							Cyprus
						</option>
						<option value="Czech Republic">
							Czech Republic
						</option>
						<option value="Denmark">
							Denmark
						</option>
						<option value="Dominican Republic">
							Dominican Republic
						</option>
						<option value="Ecuador">
							Ecuador
						</option>
						<option value="Egypt">
							Egypt
						</option>
						<option value="El Salvador">
							El Salvador
						</option>
						<option value="Estonia">
							Estonia
						</option>
						<option value="Ethiopia">
							Ethiopia
						</option>
						<option value="Finland">
							Finland
						</option>
						<option value="France">
							France
						</option>
						<option value="Gambia, The">
							Gambia, The
						</option>
						<option value="Georgia">
							Georgia
						</option>
						<option value="Germany">
							Germany
						</option>
						<option value="Greece">
							Greece
						</option>
						<option value="Guatemala">
							Guatemala
						</option>
						<option value="Guyana">
							Guyana
						</option>
						<option value="Honduras">
							Honduras
						</option>
						<option value="Hungary">
							Hungary
						</option>
						<option value="Iceland">
							Iceland
						</option>
						<option value="India">
							India
						</option>
						<option value="Indonesia">
							Indonesia
						</option>
						<option value="Ireland">
							Ireland
						</option>
						<option value="Israel">
							Israel
						</option>
						<option value="Italy">
							Italy
						</option>
						<option value="Jamaica">
							Jamaica
						</option>
						<option value="Japan">
							Japan
						</option>
						<option value="Jordan">
							Jordan
						</option>
						<option value="Kazakhstan">
							Kazakhstan
						</option>
						<option value="Kenya">
							Kenya
						</option>
						<option value="Korea, Rep.">
							Korea, Rep.
						</option>
						<option value="Kuwait">
							Kuwait
						</option>
						<option value="Latvia">
							Latvia
						</option>
						<option value="Lesotho">
							Lesotho
						</option>
						<option value="Libya">
							Libya
						</option>
						<option value="Lithuania">
							Lithuania
						</option>
						<option value="Luxembourg">
							Luxembourg
						</option>
						<option value="Madagascar">
							Madagascar
						</option>
						<option value="Malaysia">
							Malaysia
						</option>
						<option value="Mali">
							Mali
						</option>
						<option value="Malta">
							Malta
						</option>
						<option value="Mauritania">
							Mauritania
						</option>
						<option value="Mauritius">
							Mauritius
						</option>
						<option value="Mexico">
							Mexico
						</option>
						<option value="Mongolia">
							Mongolia
						</option>
						<option value="Montenegro">
							Montenegro
						</option>
						<option value="Morocco">
							Morocco
						</option>
						<option value="Mozambique">
							Mozambique
						</option>
						<option value="Namibia">
							Namibia
						</option>
						<option value="Nepal">
							Nepal
						</option>
						<option value="Netherlands">
							Netherlands
						</option>
						<option value="New Zealand">
							New Zealand
						</option>
						<option value="Nicaragua">
							Nicaragua
						</option>
						<option value="Nigeria">
							Nigeria
						</option>
						<option value="Norway">
							Norway
						</option>
						<option value="Oman">
							Oman
						</option>
						<option value="Pakistan">
							Pakistan
						</option>
						<option value="Panama">
							Panama
						</option>
						<option value="Paraguay">
							Paraguay
						</option>
						<option value="Peru">
							Peru
						</option>
						<option value="Philippines">
							Philippines
						</option>
						<option value="Poland">
							Poland
						</option>
						<option value="Portugal">
							Portugal
						</option>
						<option value="Qatar">
							Qatar
						</option>
						<option value="Romania">
							Romania
						</option>
						<option value="Russian Federation">
							Russian Federation
						</option>
						<option value="Saudi Arabia">
							Saudi Arabia
						</option>
						<option value="Senegal">
							Senegal
						</option>
						<option value="Serbia">
							Serbia
						</option>
						<option value="Singapore">
							Singapore
						</option>
						<option value="Slovenia">
							Slovenia
						</option>
						<option value="South Africa">
							South Africa
						</option>
						<option value="Spain">
							Spain
						</option>
						<option value="Sri Lanka">
							Sri Lanka
						</option>
						<option value="Sweden">
							Sweden
						</option>
						<option value="Switzerland">
							Switzerland
						</option>
						<option value="Syria">
							Syria
						</option>
						<option value="Tajikistan">
							Tajikistan
						</option>
						<option value="Tanzania">
							Tanzania
						</option>
						<option value="Thailand">
							Thailand
						</option>
						<option value="Trinidad and Tobago">
							Trinidad and Tobago
						</option>
						<option value="Tunisia">
							Tunisia
						</option>
						<option value="Turkey">
							Turkey
						</option>
						<option value="Uganda">
							Uganda
						</option>
						<option value="Ukraine">
							Ukraine
						</option>
						<option value="United Arab Emirates">
							United Arab Emirates
						</option>
						<option value="United Kingdom">
							United Kingdom
						</option>
						<option value="United States">
							United States
						</option>
						<option value="Uruguay">
							Uruguay
						</option>
						<option value="Venezuela">
							Venezuela
						</option>
						<option value="Zambia">
							Zambia
						</option>
						<option value="Zimbabwe">
							Zimbabwe
						</option>
					</select>
				</div>
				<div class="col-lg-4" style="padding: 10px; background-color: #66c2a5; border: 1px solid black;">
					<select id="select_country3" onchange="select_country3()">
						<option value="Algeria">
							Algeria
						</option>
						<option value="Albania">
							Albania
						</option>
						<option value="Argentina">
							Argentina
						</option>
						<option value="Armenia">
							Armenia
						</option>
						<option value="Australia">
							Australia
						</option>
						<option value="Austria">
							Austria
						</option>
						<option value="Azerbaijan">
							Azerbaijan
						</option>
						<option value="Bahrain">
							Bahrain
						</option>
						<option value="Bangladesh">
							Bangladesh
						</option>
						<option value="Barbados">
							Barbados
						</option>
						<option value="Belgium">
							Belgium
						</option>
						<option value="Benin">
							Benin
						</option>
						<option value="Bolivia">
							Bolivia
						</option>
						<option value="Bosnia and Herzegovina">
							Bosnia and Herzegovina
						</option>
						<option value="Botswana">
							Botswana
						</option>
						<option value="Brazil">
							Brazil
						</option>
						<option value="Bulgaria">
							Bulgaria
						</option>
						<option value="Burkina Faso">
							Burkina Faso
						</option>
						<option value="Burundi">
							Burundi
						</option>
						<option value="Cambodia">
							Cambodia
						</option>
						<option value="Cameroon">
							Cameroon
						</option>
						<option value="Canada">
							Canada
						</option>
						<option value="Chad">
							Chad
						</option>
						<option value="Chile">
							Chile
						</option>
						<option value="China">
							China
						</option>
						<option value="Colombia">
							Colombia
						</option>
						<option value="Costa Rica">
							Costa Rica
						</option>
						<option value="Croatia">
							Croatia
						</option>
						<option value="Cyprus">
							Cyprus
						</option>
						<option value="Czech Republic">
							Czech Republic
						</option>
						<option value="Denmark">
							Denmark
						</option>
						<option value="Dominican Republic">
							Dominican Republic
						</option>
						<option value="Ecuador">
							Ecuador
						</option>
						<option value="Egypt">
							Egypt
						</option>
						<option value="El Salvador">
							El Salvador
						</option>
						<option value="Estonia">
							Estonia
						</option>
						<option value="Ethiopia">
							Ethiopia
						</option>
						<option value="Finland">
							Finland
						</option>
						<option value="France">
							France
						</option>
						<option value="Gambia, The">
							Gambia, The
						</option>
						<option value="Georgia">
							Georgia
						</option>
						<option value="Germany">
							Germany
						</option>
						<option value="Greece">
							Greece
						</option>
						<option value="Guatemala">
							Guatemala
						</option>
						<option value="Guyana">
							Guyana
						</option>
						<option value="Honduras">
							Honduras
						</option>
						<option value="Hungary">
							Hungary
						</option>
						<option value="Iceland">
							Iceland
						</option>
						<option value="India">
							India
						</option>
						<option value="Indonesia">
							Indonesia
						</option>
						<option value="Ireland">
							Ireland
						</option>
						<option value="Israel">
							Israel
						</option>
						<option value="Italy">
							Italy
						</option>
						<option value="Jamaica">
							Jamaica
						</option>
						<option value="Japan">
							Japan
						</option>
						<option value="Jordan">
							Jordan
						</option>
						<option value="Kazakhstan">
							Kazakhstan
						</option>
						<option value="Kenya">
							Kenya
						</option>
						<option value="Korea, Rep.">
							Korea, Rep.
						</option>
						<option value="Kuwait">
							Kuwait
						</option>
						<option value="Latvia">
							Latvia
						</option>
						<option value="Lesotho">
							Lesotho
						</option>
						<option value="Libya">
							Libya
						</option>
						<option value="Lithuania">
							Lithuania
						</option>
						<option value="Luxembourg">
							Luxembourg
						</option>
						<option value="Madagascar">
							Madagascar
						</option>
						<option value="Malaysia">
							Malaysia
						</option>
						<option value="Mali">
							Mali
						</option>
						<option value="Malta">
							Malta
						</option>
						<option value="Mauritania">
							Mauritania
						</option>
						<option value="Mauritius">
							Mauritius
						</option>
						<option value="Mexico">
							Mexico
						</option>
						<option value="Mongolia">
							Mongolia
						</option>
						<option value="Montenegro">
							Montenegro
						</option>
						<option value="Morocco">
							Morocco
						</option>
						<option value="Mozambique">
							Mozambique
						</option>
						<option value="Namibia">
							Namibia
						</option>
						<option value="Nepal">
							Nepal
						</option>
						<option value="Netherlands">
							Netherlands
						</option>
						<option value="New Zealand">
							New Zealand
						</option>
						<option value="Nicaragua">
							Nicaragua
						</option>
						<option value="Nigeria">
							Nigeria
						</option>
						<option value="Norway">
							Norway
						</option>
						<option value="Oman">
							Oman
						</option>
						<option value="Pakistan">
							Pakistan
						</option>
						<option value="Panama">
							Panama
						</option>
						<option value="Paraguay">
							Paraguay
						</option>
						<option value="Peru">
							Peru
						</option>
						<option value="Philippines">
							Philippines
						</option>
						<option value="Poland">
							Poland
						</option>
						<option value="Portugal">
							Portugal
						</option>
						<option value="Qatar">
							Qatar
						</option>
						<option value="Romania">
							Romania
						</option>
						<option value="Russian Federation">
							Russian Federation
						</option>
						<option value="Saudi Arabia">
							Saudi Arabia
						</option>
						<option value="Senegal">
							Senegal
						</option>
						<option value="Serbia">
							Serbia
						</option>
						<option value="Singapore">
							Singapore
						</option>
						<option value="Slovenia">
							Slovenia
						</option>
						<option value="South Africa">
							South Africa
						</option>
						<option value="Spain">
							Spain
						</option>
						<option value="Sri Lanka">
							Sri Lanka
						</option>
						<option value="Sweden">
							Sweden
						</option>
						<option value="Switzerland">
							Switzerland
						</option>
						<option value="Syria">
							Syria
						</option>
						<option value="Tajikistan">
							Tajikistan
						</option>
						<option value="Tanzania">
							Tanzania
						</option>
						<option value="Thailand">
							Thailand
						</option>
						<option value="Trinidad and Tobago">
							Trinidad and Tobago
						</option>
						<option value="Tunisia">
							Tunisia
						</option>
						<option value="Turkey">
							Turkey
						</option>
						<option value="Uganda">
							Uganda
						</option>
						<option value="Ukraine">
							Ukraine
						</option>
						<option value="United Arab Emirates">
							United Arab Emirates
						</option>
						<option value="United Kingdom">
							United Kingdom
						</option>
						<option value="United States">
							United States
						</option>
						<option value="Uruguay">
							Uruguay
						</option>
						<option value="Venezuela">
							Venezuela
						</option>
						<option value="Zambia">
							Zambia
						</option>
						<option value="Zimbabwe">
							Zimbabwe
						</option>
					</select>
				</div>
			</div>
		</div>
<!--        Multivariate chart-->
		<div class="row">
			<div class="col-lg-12">
				<div class="viz2"></div>
			</div>
		</div>
	</div>
</body>
	<script>
//Global variables
var data;
var max_pop;
var div;
var max_gdp;
var max_index;
var sqrtScale;
var xScale;
var xScaleCirc;
var yScale;
var xAxis;
var yAxis;
var xScaleBar;
var xScalebars;
var yScaleBar;
var xAxisBar;
var yAxisBar;
var iterateyear1;
var iterateyear2;
var current_year = 2017;
var current_year2 = 2017;
var current_country = "Albania";
var current_country2 = "Albania";
var current_country3 = "Algeria";

// Set up data filters
//Years
function yearFilter(value) {
	return (value.Year == current_year)
}
function yearFilter2(value) {
	return (value.Year == current_year2)
}
//Countries
function countryFilter(value) {
	return (value.Country == current_country)
}
function countryFilter2(value) {
	return (value.Country == current_country2)
}
function countryFilter3(value) {
	return (value.Country == current_country3)
}
//Country incomes
function highIncomeFilter(value) {
	return (value.Income_group == "High income")
}
function upperMiddleIncomeFilter(value) {
	return (value.Income_group == "Upper middle income")
}
function lowerMiddleIncomeFilter(value) {
	return (value.Income_group == "Lower middle income")
}
function lowIncomeFilter(value) {
	return (value.Income_group == "Low income")
}
// Set chart margins
var margin = {
	top: 45,
	right: 45,
	bottom: 45,
	left: 200
};
// Width and height
var outer_width = 1200;
var outer_height = 600;
var svg_width = outer_width - margin.left - margin.right;
var svg_height = outer_height - margin.top - margin.bottom;
        
// Set up main bubble svg canvas
var svg = d3.select(".viz1").append("svg").attr("class", "svg1").attr("width", svg_width + margin.left + margin.right).attr("height", svg_height + margin.top + margin.bottom).append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
// Set up single country bubble svg canvas
var svg2 = d3.select(".svg1").append("svg").attr("class", "svg2").attr("width", svg_width + margin.left + margin.right).attr("height", svg_height + margin.top + margin.bottom).append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
// Set up bar chart svg canvas, first country
var svg3 = d3.select(".viz2").append("svg").attr("class", "svg3").attr("width", svg_width + margin.left + margin.right).attr("height", svg_height + margin.top + margin.bottom).append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
// Set up bar chart svg canvas, second country
var svg4 = d3.select(".svg3").append("svg").attr("class", "svg4").attr("width", svg_width + margin.left + margin.right).attr("height", svg_height + margin.top + margin.bottom).append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

// Bubble chart function
function makeChart() {
	document.getElementById("showyear").innerHTML = current_year;
//    Get data
	var filter_data = data.filter(yearFilter);
	var high_data = filter_data.filter(highIncomeFilter);
	var middleUpper_data = filter_data.filter(upperMiddleIncomeFilter);
	var middleLower_data = filter_data.filter(lowerMiddleIncomeFilter);
	var low_data = filter_data.filter(lowIncomeFilter);
    
//    Define bubbles
	var countries_high = svg.selectAll("circle").data(high_data, function key(d) {
		return d.Year;
	});
	var countries_middleUpper = svg.selectAll("circle").data(middleUpper_data, function key(d) {
		return d.Year;
	});
	var countries_middleLower = svg.selectAll("circle").data(middleLower_data, function key(d) {
		return d.Year;
	});
	var countries_low = svg.selectAll("circle").data(low_data, function key(d) {
		return d.Year;
	});
    
// High income bubbles
	countries_high.attr("cx", function(d) {
			return xScaleCirc(d.GDP);
		}).attr("cy", function(d) {
			return yScale(d.Global_Competitiveness_Index);
		}).attr('r', function(d) {
			return sqrtScale(d.Population);
		}).attr('id', 'circlehigh').style("fill", "#377eb8").style("fill-opacity", 0.1).style("stroke", "#377eb8").style("stroke-width", 2)
		// Adapted from http://bl.ocks.org/d3noob/a22c42db65eb00d4e369
		.on("mouseover", function(d) {
			div.transition().duration(2000).style("opacity", .9);
			div.html(d.Country).style("left", (d3.event.pageX) + "px").style("top", (d3.event.pageY - 28) + "px");
		}).on("mouseout", function(d) {
			div.transition().duration(500).style("opacity", 0);
		});
    
	countries_high.enter().append("circle").attr("cx", function(d) {
			return xScaleCirc(d.GDP);
		}).attr("cy", function(d) {
			return yScale(d.Global_Competitiveness_Index);
		}).attr('r', function(d) {
			return sqrtScale(d.Population);
		}).attr('id', 'circlehigh').style("fill", "#377eb8").style("fill-opacity", 0.1).style("stroke", "#377eb8").style("stroke-width", 2)
		// Adapted from http://bl.ocks.org/d3noob/a22c42db65eb00d4e369
		.on("mouseover", function(d) {
			div.transition().duration(200).style("opacity", .9);
			div.html(d.Country).style("left", (d3.event.pageX) + "px").style("top", (d3.event.pageY - 28) + "px");
		}).on("mouseout", function(d) {
			div.transition().duration(500).style("opacity", 0);
		});
	
// Mid-upper bubbles
countries_middleUpper.attr("cx", function(d) {
			return xScaleCirc(d.GDP);
		}).attr("cy", function(d) {
			return yScale(d.Global_Competitiveness_Index);
		}).attr('r', function(d) {
			return sqrtScale(d.Population);
		}).attr('id', 'circlemidup').style("fill", "#4daf4a").style("fill-opacity", 0.1).style("stroke", "#4daf4a").style("stroke-width", 2)
		// Adapted from http://bl.ocks.org/d3noob/a22c42db65eb00d4e369
		.on("mouseover", function(d) {
			div.transition().duration(200).style("opacity", .9);
			div.html(d.Country).style("left", (d3.event.pageX) + "px").style("top", (d3.event.pageY - 28) + "px");
		}).on("mouseout", function(d) {
			div.transition().duration(500).style("opacity", 0);
		});
	countries_middleUpper.enter().append("circle").attr("cx", function(d) {
			return xScaleCirc(d.GDP);
		}).attr("cy", function(d) {
			return yScale(d.Global_Competitiveness_Index);
		}).attr('r', function(d) {
			return sqrtScale(d.Population);
		}).attr('id', 'circlemidup').style("fill", "#4daf4a").style("fill-opacity", 0.1).style("stroke", "#4daf4a").style("stroke-width", 2)
		// Adapted from http://bl.ocks.org/d3noob/a22c42db65eb00d4e369
		.on("mouseover", function(d) {
			div.transition().duration(200).style("opacity", .9);
			div.html(d.Country).style("left", (d3.event.pageX) + "px").style("top", (d3.event.pageY - 28) + "px");
		}).on("mouseout", function(d) {
			div.transition().duration(500).style("opacity", 0);
		});
    
// Mid-lwr bubbles	
 countries_middleLower.attr("cx", function(d) {
			return xScaleCirc(d.GDP);
		}).attr("cy", function(d) {
			return yScale(d.Global_Competitiveness_Index);
		}).attr('r', function(d) {
			return sqrtScale(d.Population);
		}).attr('id', 'circlemidlow').style("fill", "#984ea3").style("fill-opacity", 0.1).style("stroke", "#984ea3").style("stroke-width", 2)
		// Adapted from http://bl.ocks.org/d3noob/a22c42db65eb00d4e369
		.on("mouseover", function(d) {
			div.transition().duration(200).style("opacity", .9);
			div.html(d.Country).style("left", (d3.event.pageX) + "px").style("top", (d3.event.pageY - 28) + "px");
		}).on("mouseout", function(d) {
			div.transition().duration(500).style("opacity", 0);
		});
	countries_middleLower.enter().append("circle").attr("cx", function(d) {
			return xScaleCirc(d.GDP);
		}).attr("cy", function(d) {
			return yScale(d.Global_Competitiveness_Index);
		}).attr('r', function(d) {
			return sqrtScale(d.Population);
		}).attr('id', 'circlemidlow').style("fill", "#984ea3").style("fill-opacity", 0.1).style("stroke", "#984ea3").style("stroke-width", 2)
		// Adapted from http://bl.ocks.org/d3noob/a22c42db65eb00d4e369
		.on("mouseover", function(d) {
			div.transition().duration(200).style("opacity", .9);
			div.html(d.Country).style("left", (d3.event.pageX) + "px").style("top", (d3.event.pageY - 28) + "px");
		}).on("mouseout", function(d) {
			div.transition().duration(500).style("opacity", 0);
		});
    
// Lower bubbles	
	countries_low.attr("cx", function(d) {
			return xScaleCirc(d.GDP);
		}).attr("cy", function(d) {
			return yScale(d.Global_Competitiveness_Index);
		}).attr('r', function(d) {
			return sqrtScale(d.Population);
		}).attr('id', 'circlelow').style("fill", "#ff7f00").style("fill-opacity", 0.1).style("stroke", "#ff7f00").style("stroke-width", 2)
		// Adapted from http://bl.ocks.org/d3noob/a22c42db65eb00d4e369
		.on("mouseover", function(d) {
			div.transition().duration(200).style("opacity", .9);
			div.html(d.Country).style("left", (d3.event.pageX) + "px").style("top", (d3.event.pageY - 28) + "px");
		}).on("mouseout", function(d) {
			div.transition().duration(500).style("opacity", 0);
		});
	countries_low.enter().append("circle").attr("cx", function(d) {
			return xScaleCirc(d.GDP);
		}).attr("cy", function(d) {
			return yScale(d.Global_Competitiveness_Index);
		}).attr('r', function(d) {
			return sqrtScale(d.Population);
		}).attr('id', 'circlelow').style("fill", "#ff7f00").style("fill-opacity", 0.1).style("stroke", "#ff7f00").style("stroke-width", 2)
		// Adapted from http://bl.ocks.org/d3noob/a22c42db65eb00d4e369
		.on("mouseover", function(d) {
			div.transition().duration(200).style("opacity", .9);
			div.html(d.Country).style("left", (d3.event.pageX) + "px").style("top", (d3.event.pageY - 28) + "px");
		}).on("mouseout", function(d) {
			div.transition().duration(500).style("opacity", 0);
		});
    
//    Exit bubbles
	countries_high.exit().remove();
	countries_middleUpper.exit().remove();
	countries_middleLower.exit().remove();
	countries_low.exit().remove();
};

// Track single country bubble function
function country_change() {
	var filter_data = data.filter(yearFilter);
	var filter_data2 = filter_data.filter(countryFilter);
	var countries2 = svg2.selectAll("svg2").data(filter_data2, function key(d) {
		return d.Year;
	});
	countries2.attr("cx", function(d) {
		return xScaleCirc(d.GDP);
	}).attr("cy", function(d) {
		return yScale(d.Global_Competitiveness_Index);
	}).attr('r', function(d) {
		return sqrtScale(d.Population);
	}).attr('id', 'circle1').style("fill", " #ffff00").style("fill-opacity", 0.9).style("stroke", "black").style("stroke-width", 1)
	countries2.enter().append("circle").attr("cx", function(d) {
		return xScaleCirc(d.GDP);
	}).attr("cy", function(d) {
		return yScale(d.Global_Competitiveness_Index);
	}).attr('r', function(d) {
		return sqrtScale(d.Population);
	}).attr('id', 'circle1').style("fill", "#ffff00").style("fill-opacity", 0.9).style("stroke", "black").style("stroke-width", 1)
};

//Bar chart function, first country
function makeBarChart() {
	var xScalebars = d3.scaleLinear().domain([0, 7]).range([0, (svg_width)]);
	var filter_data = data.filter(yearFilter2);
	var filter_data2 = filter_data.filter(countryFilter2);
//    Adapted from https://bl.ocks.org/Andrew-Reid/cdc6a54cec989d8825702ef198f002b1
	var keys = data.columns.slice(1).slice(1, 13);
	var bars = svg3.append("g").selectAll("g").data(filter_data2).enter().append("g").selectAll("rect").data(function(d) {
		return keys.map(function(key) {
			return {
				key: key,
				value: d[key]
			};
		});
	}).enter().append("rect").attr('id', 'bars1').attr("x", 1).attr("y", function(d, i) {
		return ((i + 0.15) * 42.5)
	}).attr("width", 0).transition().duration(1000).attr("width", function(d) {
		return xScalebars(d.value);
	}).attr("height", 15).attr("fill", "#8da0cb").style("stroke", "black").style("stroke-width", 1);
};
        
//Bar chart function, second country
function makeBarChart2() {
	var xScalebars = d3.scaleLinear().domain([0, 7]).range([0, (svg_width)]);
	console.log(xScalebars(6.163087881));
	var filter_data = data.filter(yearFilter2);
	var filter_data3 = filter_data.filter(countryFilter3);
    //    Adapted from https://bl.ocks.org/Andrew-Reid/cdc6a54cec989d8825702ef198f002b1
	var keys = data.columns.slice(1).slice(1, 13);
	var bars2 = svg4.append("g").selectAll("g").data(filter_data3).enter().append("g").selectAll("rect").data(function(d) {
		return keys.map(function(key) {
			return {
				key: key,
				value: d[key]
			};
		});
	}).enter().append("rect").attr('id', 'bars2').attr("x", 1).attr("y", function(d, i) {
		return ((i + 0.5) * 42.5)
	}).attr("width", 0).transition().duration(1500).attr("width", function(d) {
		return xScalebars(d.value);
	}).attr("height", 15).attr("fill", "#66c2a5").style("stroke", "black").style("stroke-width", 1);
};
        
// Load data
d3.csv("GCI_data.csv", function(error, dataset) {
	if (error) {
		console.log("Something went wrong");
		console.log(error);
	} else {
		console.log("Data Loaded");
		data = dataset;
        
//        Populate global variables
		max_pop = d3.max(data, function(d) {
			d.Population = parseInt(d.Population);
			return +d.Population;
		});
		max_gdp = d3.max(data, function(d) {
			d.GDP = parseInt(d.GDP);
			return +d.GDP;
		});
		max_index = d3.max(data, function(d) {
			d.Global_Competitiveness_Index = parseFloat(d.Global_Competitiveness_Index);
			return +d.Global_Competitiveness_Index;
		});
//        Pop scale
		sqrtScale = d3.scaleSqrt().domain([0, max_pop]).range([0, 70]);
//        Bubble xaxis scale
		xScale = d3.scaleLinear().domain([max_gdp, 0]).range([svg_width, 0]);
		xScaleCirc = d3.scaleLinear().domain([0, max_gdp]).range([0, svg_width]);
//        Bubble yaxis scale
		yScale = d3.scaleLinear().domain([max_index, 0]).range([0, svg_height]);
		//Define X axis
        xAxis = d3.axisBottom().scale(xScale).ticks(10);
		//Define Y axis
		yAxis = d3.axisLeft().scale(yScale).ticks(5);
        
		// Apply bubble x and y axis
		svg.append("g").attr("class", "axis").attr("transform", "translate(0," + svg_height + ")").call(xAxis);
		svg.append("text").attr("transform", "translate(" + (svg_width / 2) + " ," + (svg_height + margin.top) + ")").style("text-anchor", "middle").style("font-size", "18px").style("font-family", "Arial").text("Gross Domestic Product");

        svg.append("g").attr("class", "axis").call(yAxis);
		div = d3.select("body").append("div").attr("class", "tooltip").style("opacity", 0);
		svg.append("text").attr("transform", "rotate(-90)").attr("y", 0 - 70).attr("x", 0 - (svg_height / 2)).attr("dy", "1em").style("text-anchor", "middle").style("font-size", "18px").style("font-family", "Arial").text("Global Competitiveness Index");
        
//        Make initial charts
		makeChart();
		makeBarChart()
		makeBarChart2()
        
//        Bar chart x axis scale
		var xScaleBar = d3.scaleLinear().domain([7, 0]).range([svg_width, 0]);
//        Bar chart y axis terms
		var indexCat = ["Institutions", "Infrastructure", "Macroeconomic environment", "Health and primary education", "Higher education and training", "Good market efficiency", "Labor market efficiency", "Financial market development", "Technological readiness", "Market size", "Business sophistication", "Innovation"];
//        Bar chart y axis scale
		var yScaleBar = d3.scaleBand().domain(indexCat).range([0, svg_height], 0.1);
		// Define X axis
		var xAxisBar = d3.axisBottom().scale(xScaleBar).ticks(7);
		// Define Y axis
		var yAxisBar = d3.axisLeft().scale(yScaleBar).ticks(12);
        
        // Apply bar x and y axis
		svg3.append("g").attr("class", "axis").attr("transform", "translate(0," + svg_height + ")").call(xAxisBar);
		svg3.append("text").attr("transform", "translate(" + (svg_width / 2) + " ," + (svg_height + margin.top) + ")").style("text-anchor", "middle").style("font-size", "18px").style("font-family", "Arial").text("Score");
		// Call the y axis
		svg3.append("g").attr("class", "axis").call(yAxisBar).attr("transform", "translate(0,0)");;
	}
});

// Change bubble year function
function year_change() {
	if (document.getElementById("select_year").value != current_year) {
		current_year = document.getElementById("select_year").value;
	}
	makeChart();
};
// Select bubble track single country function
function select_country() {
	if (document.getElementById("select_country").value != current_country) {
		current_country = document.getElementById("select_country").value;
	}
	console.log(current_country);
	d3.selectAll('#circle1').remove();
};
// Change bar year function
function year_change2() {
	if (document.getElementById("select_year2").value != current_year2) {
		current_year2 = document.getElementById("select_year2").value;
	}
	d3.selectAll('#bars1').remove();
	d3.selectAll('#bars2').remove();
	makeBarChart()
	makeBarChart2()
};
// Select bar country 1 function
function select_country2() {
	if (document.getElementById("select_country2").value != current_country2) {
		current_country2 = document.getElementById("select_country2").value;
	}
	d3.selectAll('#bars1').remove();
	makeBarChart()
};
// Select bar country 2 function
function select_country3() {
	if (document.getElementById("select_country3").value != current_country3) {
		current_country3 = document.getElementById("select_country3").value;
	}
	d3.selectAll('#bars2').remove();
	makeBarChart2()
};

// Animate bubbles function
function animation() {
	if (iterateyear1 != null) {
		pause();
	} else {
		play();
	}

	function play() {
		iterateyear1 = setInterval(function() {
			current_year++
			if (current_year > 2017) {
				current_year = 2007
			}
			makeChart();
		}, 1000);
	}

	function pause() {
		clearInterval(iterateyear1);
		iterateyear1 = null;
	}
};
//Animate single country bubble function
function animatecountries() {
	if (iterateyear2 != null) {
		pause();
	} else {
		play();
	}

	function play() {
		iterateyear2 = setInterval(function() {
			current_year++
			if (current_year > 2017) {
				current_year = 2007
				d3.selectAll('#circle1').remove();
			}
			makeChart();
			country_change();
		}, 1000);
	}

	function pause() {
		clearInterval(iterateyear2);
		iterateyear2 = null;
	}
};
	</script>
</html>